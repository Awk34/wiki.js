---
title: Коррекции по датчику кислорода O2
description: 
published: true
date: 2021-01-03T08:02:25.543Z
tags: 
editor: markdown
dateCreated: 2021-01-02T04:39:15.955Z
---

# AFR/O2 (Closed loop fuel)

AFR/O2 (for **A**ir:**F**uel **R**atio), управляет управлением топливом по замкнутому контуру, используемым для регулировки нагрузки инжектора на основе входного сигнала датчика кислорода выхлопа (датчика O2). В сочетании с таблицей AFR система AFR с замкнутым контуром сравнит показания фактического O2 с текущим целевым соотношением топлива и внесет соответствующие корректировки.

Использование широкополосного датчика и контроллера **настоятельно** рекомендуется, однако базовая функциональность возможна с узкополосным датчиком, если он недоступен.

Следует отметить, что управление топливом по замкнутому контуру не является заменой плохой настройки. Во многих хороших конфигурациях управление по замкнутому контуру вообще не используется или только позволяет осуществлять очень небольшую регулировку.

## Настройки

Speeduino поддерживает 2 алгоритма с замкнутым контуром, каждый из которых предназначен для различных конфигураций:

1. **Simple** - Алгоритм "слежения за целью", основанный на времени, в котором величина регулировки топлива зависит от того, как долго считывание было худым или богатым по сравнению с текущей целью. Этот алгоритм лучше всего подходит для узкополосных датчиков, где доступна только базовая богатая/бережливая информация. В частности, этот алгоритм работает плохо, если у вас есть карта топлива, которая не близка к завершению. Если эта функция включена и наблюдаются колебания длительности импульса и/или СПА, даже в крейсерском режиме, то следует отключить управление по замкнутому контуру до тех пор, пока основное топливо MAP не будет лучше настроено.
2. **PID** - Это предпочтительный алгоритм с замкнутым контуром и обеспечивает лучшие результаты при сочетании с широкополосным датчиком и правильной настройке.

### Общие переменные Common variables
![o2_simple.png](/img/tuning/o2_simple.png){.align-center}

* **Sensor type** - Узкополосный или широкополосный, в зависимости от конфигурации оборудования. Узкополосный датчик должен быть 0-1v типа, широкополосные датчики должны иметь сигнал 0-5v. Широкополосные датчики должны быть откалиброваны в Tools-&gt;Calibrate AFR Table dialog
* **Algorithm** - Описание каждого доступного алгоритма см. выше.
* **Ignition events per step** - Расчет регулировки AFR будет выполняться через заданное количество циклов зажигания. Изменения в регулировке по замкнутому контуру обычно имеют некоторое отставание, прежде чем их воздействие регистрируется датчиком O2, и увеличение этого значения может учитывать это отставание. Типичные значения - 2-5.
* **Controller step size** -
* **Controller Auth** - Максимальный % разрешенной коректировки, что длительность импульса впрыска может быть изменена посредством этой регулировки по замкнутому контуру. Рекомендуемое значение - не более 20%.
* **Correct above/below AFR** - Диапазон AFR, в котором будут применяться регулировки по замкнутому контуру. Этот диапазон обычно ограничен используемым датчиком и контроллером.
* **Active above Coolant** - Замкнутый контур должен работать только после достижения двигателем рабочей температуры. Это значение должно соответствовать стандартной рабочей температуре двигателей.
* **Active above RPM** - Регулировка по замкнутому контуру, как правило, не должна производиться на холостом ходу. Используйте это значение, чтобы указать, когда должна начинаться корректировка.
* **Active below TPS** - При превышении этого значения TPS коррекция замкнутых контуров будет отключена.
* **EGO delay after start** - Всем датчикам O2 требуется период прогрева, прежде чем показания будут действительными. Это зависит от используемого датчика, но 15s является безопасным значением в большинстве случаев.

### Пропорциональные переменные PID only variables
![o2_pid.png](/img/tuning/o2_pid.png){.align-center}

* **P/I/D** - PID Proportional Gain, Integral and Derivative percentages.ПИД пропорциональное усиление, интегральные и производные проценты.

Эти опции дополняют простые условия и определяют параметры операции с замкнутым контуром.
